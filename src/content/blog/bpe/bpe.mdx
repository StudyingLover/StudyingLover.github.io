---
title: BPEæ¼”ç¤º
description: 'BPE (Byte Pair Encoding) æ˜¯ä¸€ç§å¸¸ç”¨çš„æ–‡æœ¬åˆ†è¯ç®—æ³•ï¼Œå¹¿æ³›åº”ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­ã€‚'
pubDate: '2026-1-2'
tags: ['NLP', 'BPE', 'åˆ†è¯']
slug: 'bpe'
---
## BPEç®—æ³•æ¼”ç¤º
import BpePlayground from '@src/content/blog/bpe/BpePlayground'

<BpePlayground client:load/>

## ä»€ä¹ˆæ˜¯BPEï¼Ÿ
Byte Pair Encodingï¼Œå­—èŠ‚å¯¹ç¼–ç 

åŸºç¡€å•ä½ä¸æ˜¯ Unicode å­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡â€œä½ â€ï¼‰ï¼Œè€Œæ˜¯ UTF-8 ç¼–ç åçš„ **å­—èŠ‚** (Byte)ã€‚é€šå¸¸ BPE è´ªå¿ƒåœ°åˆå¹¶å…¨å±€æœ€é«˜é¢‘

- **å‡†å¤‡è¯­æ–™ï¼š** æ‹¿ä¸€æ®µå¤§é‡çš„æ–‡æœ¬ã€‚
- **æ‹†åˆ†å­—ç¬¦ï¼š** æŠŠæ‰€æœ‰å•è¯æ‹†æˆæœ€å°çš„å­—æ¯ï¼Œå¹¶åœ¨å•è¯æœ«å°¾åŠ ä¸ªç»“æŸç¬¦ `</w>`ï¼ˆç”¨äºåŒºåˆ†å•è¯è¾¹ç•Œï¼‰ã€‚
- **ç»Ÿè®¡é¢‘ç‡ï¼š** ç»Ÿè®¡æ‰€æœ‰ç›¸é‚»å­—ç¬¦å¯¹ï¼ˆPairï¼‰å‡ºç°çš„æ¬¡æ•°ã€‚
- **åˆå¹¶ (Merge)ï¼š** æ‰¾åˆ°å‡ºç°æ¬¡æ•°**æœ€å¤š**çš„é‚£ä¸€å¯¹ï¼ŒæŠŠå®ƒå˜æˆä¸€ä¸ªæ–°çš„ Tokenã€‚
- **å¾ªç¯ï¼š** é‡å¤æ­¥éª¤ 3 å’Œ 4ï¼Œç›´åˆ°è¾¾åˆ°é¢„è®¾çš„è¯è¡¨å¤§å°ï¼ˆä¾‹å¦‚ GPT-4 çš„è¯è¡¨å¤§æ¦‚æ˜¯ 10 ä¸‡ä¸ª Tokenï¼‰ã€‚

## æµç¨‹ç¤ºæ„å›¾
<div class="bpe-full-container" style="font-family: 'JetBrains Mono', Consolas, monospace; background-color: var(--background-primary); color: var(--text-normal); border: 1px solid var(--background-modifier-border); border-radius: 8px; max-width: 800px; margin: 0 auto;">

    <div style="padding: 20px; border-bottom: 2px solid var(--interactive-accent); background: var(--background-secondary);">
        <h2 style="margin: 0; font-size: 1.5em;">BPE ç®—æ³•æ¼”ç¤º</h2>
        <div style="margin-top: 5px; opacity: 0.7; font-size: 0.9em;">
            <span style="margin-right: 15px;">ğŸ“Š åˆå§‹è¯­æ–™: hug(10), pug(5), pun(12), bun(4)</span>
        </div>
    </div>

    <div class="iter-block" style="padding: 20px; border-bottom: 1px solid var(--background-modifier-border);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; color: var(--interactive-accent);">Step 0: åˆå§‹åŒ–é˜¶æ®µ (Initialization)</h3>
            <span style="background: var(--background-modifier-form-field); padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">å½“å‰è¯è¡¨: 7ä¸ªåŸºç¡€å­—ç¬¦</span>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <div style="font-weight: bold; margin-bottom: 8px; font-size: 0.9em; opacity: 0.8;">è¯­æ–™åº“ç‰©ç†çŠ¶æ€</div>
                <div style="background: var(--background-secondary); padding: 10px; border-radius: 6px; font-size: 0.85em; line-height: 1.6;">
                    10: h u g &lt;/w&gt;<br />
                    05: p u g &lt;/w&gt;<br />
                    12: p u n &lt;/w&gt;<br />
                    04: b u n &lt;/w&gt;
                </div>
            </div>

            <div>
                <div style="font-weight: bold; margin-bottom: 8px; font-size: 0.9em; opacity: 0.8;">ç›¸é‚»è¯å¯¹é¢‘æ¬¡ (æ’å)</div>
                <table style="width: 100%; font-size: 0.85em; border-collapse: collapse;">
                    <tr style="border-bottom: 1px solid var(--background-modifier-border); text-align: left; opacity: 0.6;"><th>Pair</th><th>Count</th><th>æ¥æºæ„æˆ</th></tr>
                    <tr style="background: rgba(33, 150, 243, 0.15); font-weight: bold; color: #2196f3;">
                        <td>p u</td><td>17</td><td>pug(5)+pun(12)</td>
                    </tr>
                    <tr><td>u n</td><td>16</td><td>pun(12)+bun(4)</td></tr>
                    <tr><td>n &lt;/w&gt;</td><td>16</td><td>pun(12)+bun(4)</td></tr>
                    <tr><td>u g</td><td>15</td><td>hug(10)+pug(5)</td></tr>
                    <tr><td>g &lt;/w&gt;</td><td>15</td><td>hug(10)+pug(5)</td></tr>
                    <tr><td>h u</td><td>10</td><td>hug(10)</td></tr>
                    <tr><td>b u</td><td>4</td><td>bun(4)</td></tr>
                </table>
            </div>
        </div>
        
        <div style="margin-top: 15px; padding: 10px; background: rgba(33, 150, 243, 0.1); border-left: 4px solid #2196f3; font-size: 0.9em;">
            <strong>ğŸš€ æ‰§è¡ŒåŠ¨ä½œ:</strong> åˆå¹¶ <code>(p, u)</code> -> ç”Ÿæˆæ–° Token <code>pu</code>
        </div>
    </div>

    <div class="iter-block" style="padding: 20px; border-bottom: 1px solid var(--background-modifier-border);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; color: var(--interactive-accent);">Step 1: ç¬¬ä¸€æ¬¡åˆå¹¶å</h3>
            <span style="background: var(--background-modifier-form-field); padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">æ–°å¢ Token: [pu]</span>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <div style="font-weight: bold; margin-bottom: 8px; font-size: 0.9em; opacity: 0.8;">è¯­æ–™åº“æ›´æ–°æƒ…å†µ</div>
                <div style="background: var(--background-secondary); padding: 10px; border-radius: 6px; font-size: 0.85em; line-height: 1.6;">
                    10: h u g &lt;/w&gt; <span style="opacity:0.5; font-size:0.8em;">(uæœªå˜)</span><br />
                    05: <span style="color:#2196f3; font-weight:bold;">pu</span> g &lt;/w&gt;<br />
                    12: <span style="color:#2196f3; font-weight:bold;">pu</span> n &lt;/w&gt;<br />
                    04: b u n &lt;/w&gt; <span style="opacity:0.5; font-size:0.8em;">(uæœªå˜)</span>
                </div>
            </div>

            <div>
                <div style="font-weight: bold; margin-bottom: 8px; font-size: 0.9em; opacity: 0.8;">é‡æ–°è®¡ç®—é¢‘æ¬¡è¡¨</div>
                <table style="width: 100%; font-size: 0.85em; border-collapse: collapse;">
                    <tr style="border-bottom: 1px solid var(--background-modifier-border); text-align: left; opacity: 0.6;"><th>Pair</th><th>Count</th><th>å˜åŒ–è¯´æ˜</th></tr>
                    
                    <tr style="background: rgba(76, 175, 80, 0.15); font-weight: bold; color: #4caf50;">
                        <td>n &lt;/w&gt;</td><td>16</td><td>-</td>
                    </tr>
                    
                    <tr><td>g &lt;/w&gt;</td><td>15</td><td>-</td></tr>
                    <tr><td>pu n</td><td>12</td><td><span style="color:#2196f3;">æ–°å‡ºç°!</span></td></tr>
                    <tr><td>h u</td><td>10</td><td>-</td></tr>
                    
                    <tr>
                        <td>u g</td>
                        <td>10 <span style="color:#e53935; font-size:0.8em;">(ğŸ“‰åŸä¸º15)</span></td>
                        <td style="font-size:0.8em; color:#999;">pugè´¡çŒ®æ¶ˆå¤±</td>
                    </tr>
                    <tr><td>pu g</td><td>5</td><td><span style="color:#2196f3;">æ–°å‡ºç°!</span></td></tr>
                    
                    <tr style="background: #ffebee;">
                        <td style="color: #c62828; font-weight:bold;">u n</td>
                        <td style="color: #c62828; font-weight:bold;">4 <span style="font-size:0.8em;">(ğŸ“‰åŸä¸º16)</span></td>
                        <td style="font-size:0.8em; color:#c62828;">punè´¡çŒ®æ¶ˆå¤±</td>
                    </tr>
                </table>
            </div>
        </div>
         <div style="margin-top: 15px; padding: 10px; background: rgba(76, 175, 80, 0.1); border-left: 4px solid #4caf50; font-size: 0.9em;">
            <strong>ğŸš€ æ‰§è¡ŒåŠ¨ä½œ:</strong> åˆå¹¶ <code>(n, &lt;/w&gt;)</code> -> ç”Ÿæˆæ–° Token <code>n&lt;/w&gt;</code>
        </div>
    </div>

    <div class="iter-block" style="padding: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; color: var(--interactive-accent);">Step 2: ç¬¬äºŒæ¬¡åˆå¹¶å</h3>
            <span style="background: var(--background-modifier-form-field); padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">æ–°å¢ Token: [n&lt;/w&gt;]</span>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <div style="font-weight: bold; margin-bottom: 8px; font-size: 0.9em; opacity: 0.8;">è¯­æ–™åº“æ›´æ–°æƒ…å†µ</div>
                <div style="background: var(--background-secondary); padding: 10px; border-radius: 6px; font-size: 0.85em; line-height: 1.6;">
                    10: h u g &lt;/w&gt;<br />
                    05: <span style="color:#2196f3;">pu</span> g &lt;/w&gt;<br />
                    12: <span style="color:#2196f3;">pu</span> <span style="color:#4caf50; font-weight:bold;">n&lt;/w&gt;</span><br />
                    04: b u <span style="color:#4caf50; font-weight:bold;">n&lt;/w&gt;</span>
                </div>
            </div>

            <div>
                <div style="font-weight: bold; margin-bottom: 8px; font-size: 0.9em; opacity: 0.8;">é‡æ–°è®¡ç®—é¢‘æ¬¡è¡¨</div>
                <table style="width: 100%; font-size: 0.85em; border-collapse: collapse;">
                    <tr style="border-bottom: 1px solid var(--background-modifier-border); text-align: left; opacity: 0.6;"><th>Pair</th><th>Count</th><th>å¤‡æ³¨</th></tr>
                    
                    <tr style="background: rgba(255, 152, 0, 0.15); font-weight: bold; color: #f57c00;">
                        <td>g &lt;/w&gt;</td><td>15</td><td>hug(10)+pug(5)</td>
                    </tr>
                    
                    <tr><td>pu n&lt;/w&gt;</td><td>12</td><td><span style="color:#4caf50;">æ–°å‡ºç°!</span></td></tr>
                    <tr><td>h u</td><td>10</td><td>-</td></tr>
                    <tr><td>u g</td><td>10</td><td>-</td></tr>
                    <tr><td>pu g</td><td>5</td><td>-</td></tr>
                    <tr><td>u n&lt;/w&gt;</td><td>4</td><td><span style="color:#4caf50;">æ–°å‡ºç°!</span></td></tr>
                </table>
            </div>
        </div>
         <div style="margin-top: 15px; padding: 10px; background: rgba(255, 152, 0, 0.1); border-left: 4px solid #f57c00; font-size: 0.9em;">
            <strong>ğŸš€ æ‰§è¡ŒåŠ¨ä½œ:</strong> åˆå¹¶ <code>(g, &lt;/w&gt;)</code> -> ç”Ÿæˆæ–° Token <code>g&lt;/w&gt;</code>
        </div>
    </div>
    
    <div style="padding: 20px; background: var(--background-secondary); border-top: 1px solid var(--background-modifier-border);">
        <h3 style="margin-top:0; font-size: 1em;">æœ€ç»ˆè¯è¡¨å¿«ç…§ (Vocab Snapshot)</h3>
        <div style="display:flex; gap:10px; flex-wrap:wrap; font-family: monospace; font-size: 0.9em;">
            <span style="border:1px solid #666; padding:2px 6px; border-radius:4px;">pu</span>
            <span style="border:1px solid #666; padding:2px 6px; border-radius:4px;">n&lt;/w&gt;</span>
            <span style="border:1px solid #666; padding:2px 6px; border-radius:4px;">g&lt;/w&gt;</span>
            <span style="border:1px solid #666; padding:2px 6px; border-radius:4px; opacity:0.5;">...å‰©ä½™åŸºç¡€å­—ç¬¦...</span>
        </div>
    </div>

</div>
